## <center>从RCNN到faster-RCNN</center>

### 传统的目标检测方法

![传统目标检测框架](http://wshaow.club/object_detection_frame.jpg-water_mark)

传统目标检测的主要改进在4个模块：候选框，特征提取，分类器，NMS。

#### 1.候选框

滑动窗口

selective search

EdgeBox

#### 2.特征提取

底层特征：颜色，纹理

中层特征：LDA 等等特征

高层次特征：语义特征，头发，帽子，戴眼镜等

#### 3.分类器分类

分类器：SVM， 随机森林等等

#### 4.NMS

选择重叠候选框中合理的作为输出结果

### 几个传统目标检测方法

#### viola jones

1.haar特征

![](http://wshaow.club/haar_features.jpg-water_mark)

这个特征就是模板中的白色部分像素值的累加和减去黑色部分像素值的累加和。

为了加快计算速度使用了一个叫做积分图的东西。

积分图构建算法：

```py
算法名称：积分图
-------------------------------------------------------------------------------
输入：原始图像img
-------------------------------------------------------------------------------
integ_graph <- zeros(img.shape())
for x in range(img.height):
	sum_col = 0
	for y in range(img.width):
		sum_col = sum_col + img[x][y]
		integ_graph[x][y] = integ_graph[x-1][y] + sum_col # 这个要注意溢出的情况
return integ_graph
-------------------------------------------------------------------------------
返回最终的积分图：integ_graph
```

**在实际中，如果使用旋转特征，则需要多计算一张积分图。但是旋转特征的效果往往不理想，得不偿失，不建议使用。**

2.Adaboost方法

有了特征，想要得到区分函数是非常容易的。常见的SVM方法和KNN方法都是可以做到的。但尽管本身的计算并不复杂，但Haar特征还是太多了。尤其现在图片分辨率动辄成千上万。从这些特征中选取合适的特征就非常重要。从工程中得到的实践结果是，我们可以通过结合很多个弱分类器从而组合成一个强分类器。

3.Cascade分类器

在VJ方法中的第三个亮点就是使用了级联分类器。简单来说，就是先将几个通过Adaboost方法得到的强分类器进行排序，排序原则是简单的放在前边。因为通常来说人脸只占一小部分，所以可以很放心地在前几层分类器就拒绝掉大部分非人脸区域。只要前一级拒绝了，就不在进入下一级分类器，这可以大大提高速度。其本质是一颗退化决策树。



#### Hog detection

1.Hog特征

> 方向梯度直方图（Histogram of Oriented Gradient, HOG）特征是一种在计算机视觉和图像处理中用来进行物体检测的特征描述子。它通过计算和统计图像局部区域的梯度方向直方图来构成特征。

2.基本的训练过程

**训练过程**

准备一个数据集，包含pos（存在检测物体）和neg（不存在检测物体），这个数据集中的图像大小相同，比如（40, 100）高度x宽度，那么使用HOG检测子对数据集检测HOG特征，pos标记为正例样本，neg标记为负例样本，输入到SVM分类起进行训练，得到分类模型。

**测试过程**

输入一张图像，使用图像金字塔对图像进行下采样，每一个octave的图像进行滑窗操作，滑窗大小与训练数据集中的图像大小相同，比如（40, 100）高度x宽度，每一次滑窗后的图像提取HOG特征子，输入训练好的SVM分类器中进行预测，如果检测结果为正例样本，即pos存在检测物体，那么记录该检测结果，detection（x,y,pred_prob,w,h），这个检测结果包含较多的重叠区域，使用非极大值抑制对重叠区域进行剔除，最后的结果即为检测物体结果，包括检测结果的bounding box和检测结果置性度（pred_prob）。

#### Deformable Part-based Model (DPM)



### 参考

[Viola Jones Face Detector](https://www.cnblogs.com/hrlnw/p/3374707.html )

[Adaboost 算法的原理与推导](https://blog.csdn.net/v_JULY_v/article/details/40718799)





